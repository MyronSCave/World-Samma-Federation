"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[357],{554:(e,t,s)=>{s.d(t,{A:()=>o});const n=s(6213).A.create();n.interceptors.response.use((async e=>e),(e=>Promise.reject(e)));const o=n},8024:(e,t,s)=>{s.d(t,{A:()=>M});var n=s(8028),o=s(1221),r=s(5522),i=s(3952),a=s(7426),l=s(8360),c=s(9627),d=s(1377),h=s(1273),u=s(532),p=s(7918),g=s(1847),x=s(5156),m=s(8842),j=s(927),f=s(5851),b=s(4929),C=s(1300),y=s(2257),k=s(1823),v=s(3216),w=s(6818),_=s(5532),A=s(4007),z=s(3984),S=s(3224),I=s(6642),E=s(5043),D=s(6213),$=s(579);const N=()=>{const{isOpen:e,onOpen:t,onClose:s}=(0,o.j)(),[a,l]=(0,E.useState)([]),[c,h]=(0,E.useState)(!1),{user:u}=(0,w.a)(),p=(0,v.Zp)(),g=(0,E.useCallback)((async()=>{if(u)try{const e={headers:{Authorization:"Bearer ".concat(u.token)}},{data:t}=await D.A.get("/api/clubs/github/something/".concat(u._id),e);l(t)}catch(e){console.error("Error fetching club requests:",e)}}),[u]);(0,E.useEffect)((()=>{u&&g()}),[u,g]);return(0,$.jsxs)($.Fragment,{children:[(0,$.jsxs)(n.$,{backgroundColor:"white",_hover:{backgroundColor:"transparent"},onClick:t,children:[(0,$.jsx)(d._,{src:"https://res.cloudinary.com/dvc7i8g1a/image/upload/v1709643622/icons8-group-48_asymxw.png",height:5}),a&&a.length>0&&(0,$.jsx)(i.E,{position:"absolute",bottom:"70%",right:"70%",transform:"translate(50%, 0)",bg:"red.500",borderRadius:"50%",width:"2px",height:"2px",p:1.5}),(0,$.jsx)(i.E,{})]}),(0,$.jsxs)(_.aF,{isOpen:e,onClose:s,children:[(0,$.jsx)(j.m,{bg:"blackAlpha.300",backdropFilter:"blur(10px) hue-rotate(90deg)"}),(0,$.jsxs)(A.$,{children:[(0,$.jsx)(b.r,{textAlign:"center",children:"Clubs Requests"}),(0,$.jsx)(z.s,{}),(0,$.jsx)(C.c,{display:"flex",justifyContent:"center",alignItems:"center",flexDir:"column",maxH:"300px",children:a&&a.length>0?a.map(((e,t)=>(0,$.jsxs)(r.az,{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",children:[(0,$.jsxs)(n.$,{justifyContent:"space-between",onClick:()=>p("/showclub/".concat(e._id)),children:[t+1,". Club Name: ",e.name]},e._id),(0,$.jsx)(n.$,{background:"#f05e56",onClick:()=>(async e=>{if(u&&e){h(!0);try{const t={headers:{Authorization:"Bearer ".concat(u.token)}},{data:s}=await D.A.get("/api/clubs/decline/request/".concat(e,"/").concat(u._id),t);l(s),h(!1)}catch(t){h(!1),console.error("Error fetching club requests/decline:",t)}}})(e._id),children:c?(0,$.jsx)(S.y,{size:"small"}):"Decline"})]},t))):(0,$.jsx)($.Fragment,{children:(0,$.jsx)(i.E,{children:"All club requests have been replied to."})})}),(0,$.jsx)(I.j,{fontSize:"small",textDecor:"underline",children:"These requests were made by club coaches."})]})]})]})};const M=function(){const{user:e,notification:t,setNotification:s}=(0,w.a)(),{isOpen:_,onOpen:A,onClose:z}=(0,o.j)(),S=(0,v.Zp)(),I=(0,a.A)({base:"none",md:"flex"}),E=(0,a.A)({base:"hidden",md:"visible"});return(0,$.jsxs)($.Fragment,{children:[(0,$.jsxs)(r.az,{display:"flex",justifyContent:"space-between",alignItems:"center",bg:"white",w:"100%",p:3,paddingBottom:2,boxShadow:"2xl",zIndex:10,top:0,position:"fixed",children:[(0,$.jsx)(i.E,{textAlign:"center",fontSize:{base:"small",md:"medium"},fontWeight:"bold",userSelect:"none",p:0,m:0,pl:3,children:"Worldsamma"}),(0,$.jsxs)(r.az,{display:"flex",justifyContent:"center",alignItems:"center",children:[(0,$.jsx)(n.$,{backgroundColor:"transparent",display:I,visibility:E,_hover:{backgroundColor:"transparent",color:"green.400"},onClick:()=>{S("/dashboard")},children:"My Programs"}),(0,$.jsx)(n.$,{variant:"ghost",onClick:A,_hover:{backgroundColor:"transparent",color:"green.400"},children:(0,$.jsx)(i.E,{display:{base:"none",md:"flex"},px:4,userSelect:"none",children:"Discover"})}),(0,$.jsx)(N,{})]}),(0,$.jsxs)("div",{children:[(0,$.jsxs)(u.W,{children:[(0,$.jsxs)(p.I,{p:1,position:"relative",children:[(0,$.jsx)(y.X,{fontSize:"2xl",p:0,m:0}),t.length>0&&(0,$.jsx)(l.E,{variant:"subtle",position:"absolute",top:"-3px",right:"-3px",backgroundColor:"red",zIndex:1,borderRadius:"50%",color:"white",children:t.length})]}),(0,$.jsxs)(g.c,{pl:2,children:[!t.length&&"No New Messages",t.map((e=>(0,$.jsx)(x.D,{onClick:()=>{s(t.filter((t=>t!==e)))},children:"New Message from ".concat(e.sender?e.sender.name:"Coach"," ADM: ").concat(e.sender?e.sender.admission:" ")},e._id)))]})]}),(0,$.jsx)(u.W,{children:(0,$.jsx)(p.I,{as:n.$,bg:"white",_hover:{backgroundColor:"transparent"},onClick:A,children:"flex"===I?(0,$.jsx)(k.e,{size:"sm",cursor:"pointer",name:null===e||void 0===e?void 0:e.name,src:null===e||void 0===e?void 0:e.pic}):(0,$.jsx)(c.K,{backgroundColor:"transparent",icon:(0,$.jsx)(d._,{src:"https://res.cloudinary.com/dvc7i8g1a/image/upload/v1706276791/icons8-menu-50_afv1fe.png",height:5})})})})]})]}),(0,$.jsxs)(m._,{placement:"left",onClose:z,isOpen:_,children:[(0,$.jsx)(j.m,{bg:"blackAlpha.300",backdropFilter:"blur(10px) hue-rotate(90deg)"}),(0,$.jsxs)(f.z,{children:[(0,$.jsxs)(b.r,{borderBottomWidth:"1px",display:"flex",justifyContent:"space-between",children:["Dashboard",(0,$.jsx)(h.J,{onClick:z})]}),(0,$.jsxs)(C.c,{display:"flex",flexDir:"column",justifyContent:"space-between",width:"100%",children:[(0,$.jsxs)(r.az,{padding:3,display:"flex",justifyContent:"space-around",flexDir:"column",children:[(0,$.jsxs)(n.$,{display:"flex",justifyContent:"left",alignItems:"center",background:"white",m:1,_hover:{backgroundColor:"transparent",color:"green"},onClick:()=>S("/profile"),children:[(0,$.jsx)(k.e,{size:"sm",cursor:"pointer",name:null===e||void 0===e?void 0:e.name,src:null===e||void 0===e?void 0:e.pic}),(0,$.jsx)(i.E,{p:2,m:1,children:"Profile"})]}),(0,$.jsx)(n.$,{justifyContent:"left",background:"white",_hover:{backgroundColor:"transparent",color:"green"},onClick:()=>{S("/dashboard"),z()},children:"My Programs"}),(0,$.jsx)(n.$,{justifyContent:"start",background:"white",_hover:{backgroundColor:"transparent",color:"green"},onClick:()=>{S("/clubs"),z()},children:"Clubs"}),(0,$.jsx)(n.$,{justifyContent:"left",background:"white",_hover:{backgroundColor:"transparent",color:"green"},isDisabled:!(null!==e&&void 0!==e&&e.provinces),onClick:()=>{S("/province"),z()},children:"Provincial level"}),(0,$.jsx)(n.$,{background:"white",justifyContent:"left",_hover:{backgroundColor:"transparent",color:"green"},onClick:()=>{S("/national"),z()},children:"National level"}),(0,$.jsx)(n.$,{background:"white",justifyContent:"left",_hover:{backgroundColor:"transparent",color:"green"},children:"International Championship"})]}),(0,$.jsx)(n.$,{onClick:()=>{localStorage.removeItem("userInfo"),s([]),S("/")},children:"Log out"})]})]})]})]})}},9357:(e,t,s)=>{s.r(t),s.d(t,{default:()=>w});var n=s(5043),o=s(3748),r=s(5522),i=s(4377),a=s(3952),l=s(7118),c=s(834),d=s(1377),h=s(8028),u=s(3224),p=s(5695),g=s(3461),x=s(4776),m=s(7921),j=s(9699),f=s(8024),b=s(6213),C=s(3216),y=s(554),k=s(6818),v=s(579);const w=e=>{let{user:t}=e;const[s,w]=(0,n.useState)([]),[_,A]=(0,n.useState)(!1),[z,S]=(0,n.useState)(!1),[I,E]=(0,n.useState)(void 0),[D,$]=(0,n.useState)(void 0),[N,M]=(0,n.useState)(!1),[F,P]=(0,n.useState)(!1),[W,B]=(0,n.useState)(""),[O,R]=(0,n.useState)(""),T=(0,o.d)(),q=(0,C.Zp)(),{setMessages:H}=(0,k.a)(),U=(e,s,n)=>{if(console.log("Rejected submission with ID: ".concat(e)),P(!0),e&&t)try{const o={headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(t.token)}},r=s.split("/").pop().split(".")[0],i={publicIds:[r,n.split("/").pop().split(".")[0]]};y.A.post("/api/submit/delete/".concat(e),i,o).then((async e=>{w(e.data),P(!0)})).catch((e=>{P(!1),e.response&&401===e.response.status&&(T({title:"Your session has expired",description:"Logging out in less than 8 seconds",duration:8e3,status:"loading",position:"bottom"}),setTimeout((()=>{localStorage.removeItem("userInfo"),q("/")}),8e3))}))}catch(o){P(!1),console.error("Error fetching Club:",o)}},Z=(0,n.useCallback)((async()=>{if(!t)return void q("/dashboard");const e={headers:{Authorization:"Bearer ".concat(t.token)}};if(D&&W)try{const{data:t}=await b.A.get("/api/user/certificate/".concat(W),{sendCertificate:D},e)}catch(s){console.log(s)}else try{const{data:t}=await b.A.get("/api/submit",e);console.log(t),w(t)}catch(s){console.log(s),T({title:"Error Occurred!",status:"error",duration:5e3,isClosable:!0,position:"bottom"})}}),[T,t,W,D]);(0,n.useEffect)((()=>{Z()}),[Z]);return(0,v.jsxs)(r.az,{display:"flex",width:"100%",justifyContent:"center",alignItems:"center",flexDir:"column",overflowY:"auto",background:"white",children:[" ",(0,v.jsx)(f.A,{}),(0,v.jsx)(i.D,{mt:10,children:"Admin Work Slot"}),(0,v.jsxs)(r.az,{children:[" ",(0,v.jsxs)(a.E,{textAlign:"center",fontSize:"sm",fontWeight:500,bg:(0,l.dU)("green.50","green.900"),p:2,width:"60%",color:"green.500",rounded:"full",marginTop:2,children:[s.length," submissions."]})]}),(0,v.jsxs)(r.az,{overflow:"auto",children:[0===s.length&&(0,v.jsx)(a.E,{children:"Work will be posted here."}),s.length>0&&s.map((e=>(0,v.jsxs)(c.T,{m:3,spacing:4,children:[(0,v.jsxs)(r.az,{display:"flex",justifyContent:"center",alignItems:"center",ml:2,width:"100%",children:[e.coachAssisted&&(0,v.jsx)(a.E,{fontSize:"sm",fontWeight:500,bg:(0,l.dU)("green.50","green.900"),px:6,p:"3",m:1,color:"green.500",rounded:"full",children:"Coach's assisted student rank upgrading"}),(0,v.jsx)(d._,{src:e.passport,alt:"Passport",width:"100",height:"100"}),(0,v.jsxs)(r.az,{justifyContent:"start",ml:2,textAlign:"start",children:[(0,v.jsxs)(i.D,{size:"md",children:["Name: ",e.student.name," ",e.student.otherName]}),(0,v.jsxs)(a.E,{children:["Admission: ",e.student.admission]}),(0,v.jsxs)(a.E,{children:["Current Rank: ",e.student.belt]})]})]})," ",(0,v.jsx)(r.az,{children:(0,v.jsx)("video",{controls:!0,width:"300",height:"200",children:(0,v.jsx)("source",{src:e.video,type:"video/mp4"})})}),(0,v.jsxs)(r.az,{display:"flex",width:{base:"90%",md:"60%"},justifyContent:"space-between",children:[" ",(0,v.jsx)(h.$,{isDisabled:_,onClick:()=>{S(!0)},colorScheme:"green",children:"Approve"}),(0,v.jsxs)(h.$,{isDisabled:z||e.coachAssisted,onClick:()=>{A(!0)},colorScheme:"red",children:[F&&(0,v.jsx)(u.y,{size:"sm"}),"Reject"]})]}),_&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(p.T,{placeholder:"Please leave a message for student...",value:O,onChange:e=>R(e.target.value)}),(0,v.jsx)(h.$,{onClick:()=>{(async()=>{if(O&&t&&W)try{const e=t._id,s={headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(t.token)}},{data:n}=await b.A.post("/api/message",{sender:W,content:O,userId:e},s);R(""),H((e=>[...e,n])),socket.emit("new message",n)}catch(e){console.log(e),T({title:"Failed to send the Message",description:"Please try again after some time",status:"error",duration:5e3,isClosable:!0,position:"bottom"})}})(),U(e._id,e.passport,e.video),B(e.student._id)},children:"Send Message"})]}),z&&(0,v.jsxs)(v.Fragment,{children:[" ",(0,v.jsxs)(g.MJ,{isInvalid:!I,children:[(0,v.jsx)(x.l,{children:"Certificate"}),(0,v.jsx)(m.p,{type:"file",accept:"application/pdf",onChange:e=>E(e.target.files[0])}),N&&(0,v.jsx)("p",{children:"Uploading passport photo..."}),(0,v.jsx)(j.Wt,{children:"Please select a certificate."})]}),(0,v.jsx)(h.$,{onClick:()=>{(()=>{I||T({title:"Select a certificate please.",status:"info"}),M(!0);let e=new FormData;e.append("file",I),e.append("upload_preset","worldsamma"),fetch("https://api.cloudinary.com/v1_1/dsdlgmgwi/image/upload",{method:"post",body:e}).then((e=>e.json())).then((e=>{$(e.url),M(!1)})).catch((e=>{M(!1),T({title:"Error Occurred uploading your passport photo.",description:"Please try again later.",duration:5e3,status:"error"})}))})(),U(e._id,e.passport,e.video),B(e.student._id)},children:"Submit"})]})]},e._id)))]})]})}},4377:(e,t,s)=>{s.d(t,{D:()=>c});var n=s(3226),o=s(3761),r=s(6254),i=s(4550),a=s(9254),l=s(579),c=(0,n.R)((function(e,t){const s=(0,o.Vl)("Heading",e),{className:n,...c}=(0,r.MN)(e);return(0,l.jsx)(i.B.h2,{ref:t,className:(0,a.cx)("chakra-heading",e.className),...c,__css:s})}));c.displayName="Heading"},5695:(e,t,s)=>{s.d(t,{T:()=>h});var n=s(4617),o=s(3226),r=s(3761),i=s(6254),a=s(4550),l=s(9254),c=s(579);var d=["h","minH","height","minHeight"],h=(0,o.R)(((e,t)=>{const s=(0,r.Vl)("Textarea",e),{className:o,rows:h,...u}=(0,i.MN)(e),p=(0,n.t)(u),g=h?function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const s=Object.assign({},e);for(const n of t)n in s&&delete s[n];return s}(s,d):s;return(0,c.jsx)(a.B.textarea,{ref:t,rows:h,...p,className:(0,l.cx)("chakra-textarea",o),__css:g})}));h.displayName="Textarea"}}]);
//# sourceMappingURL=357.276bb209.chunk.js.map