"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[915],{3747:(e,n,t)=>{t.d(n,{ZU:()=>a,bK:()=>l});var r=t(6213),o=t(5043),i=t(5749),s=t(6818);function l(e){const n=(0,o.useRef)(null),{user:t}=(0,s.a)();return(0,o.useEffect)((()=>{if(n.current)return;const r=(0,i.io)("/",{query:{token:e}});return r.on("connect",(()=>{const e=null===t||void 0===t?void 0:t.email;r.emit("newConnection",{email:e})})),r.on("disconnect",(()=>{})),n.current=r,()=>{r.disconnect(),n.current=null}}),[e,null===t||void 0===t?void 0:t.email]),n.current}async function a(e,n,t,o){if(n)try{const i={headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(t.token)}},{data:s}=await r.A.post("/api/paycheck/makepaymentmpesa/".concat(t._id,"?amount=").concat(e),{phoneNumber:n},i);s&&o({title:"You have been prompt to finish your subscription process",status:"info",duration:1e3,position:"bottom"})}catch(i){}}},8024:(e,n,t)=>{t.d(n,{A:()=>$});var r=t(8028),o=t(1221),i=t(5522),s=t(3952),l=t(7426),a=t(8360),c=t(9627),d=t(1377),u=t(1273),h=t(532),x=t(7918),p=t(1847),m=t(5156),b=t(8842),g=t(927),j=t(5851),f=t(4929),v=t(1300),C=t(2257),y=t(1823),k=t(3216),w=t(6818),S=t(5532),z=t(4007),A=t(3984),R=t(3224),E=t(6642),_=t(5043),I=t(6213),q=t(579);const D=()=>{const{isOpen:e,onOpen:n,onClose:t}=(0,o.j)(),[l,a]=(0,_.useState)([]),[c,u]=(0,_.useState)(!1),{user:h}=(0,w.a)(),x=(0,k.Zp)(),p=(0,_.useCallback)((async()=>{if(h)try{const e={headers:{Authorization:"Bearer ".concat(h.token)}},{data:n}=await I.A.get("/api/clubs/github/something/".concat(h._id),e);a(n)}catch(e){console.error("Error fetching club requests:",e)}}),[h]);(0,_.useEffect)((()=>{h&&p()}),[h,p]);return(0,q.jsxs)(q.Fragment,{children:[(0,q.jsxs)(r.$,{backgroundColor:"white",_hover:{backgroundColor:"transparent"},onClick:n,children:[(0,q.jsx)(d._,{src:"https://res.cloudinary.com/dvc7i8g1a/image/upload/v1709643622/icons8-group-48_asymxw.png",height:5}),l&&l.length>0&&(0,q.jsx)(s.E,{position:"absolute",bottom:"70%",right:"70%",transform:"translate(50%, 0)",bg:"red.500",borderRadius:"50%",width:"2px",height:"2px",p:1.5}),(0,q.jsx)(s.E,{})]}),(0,q.jsxs)(S.aF,{isOpen:e,onClose:t,children:[(0,q.jsx)(g.m,{bg:"blackAlpha.300",backdropFilter:"blur(10px) hue-rotate(90deg)"}),(0,q.jsxs)(z.$,{children:[(0,q.jsx)(f.r,{textAlign:"center",children:"Clubs Requests"}),(0,q.jsx)(A.s,{}),(0,q.jsx)(v.c,{display:"flex",justifyContent:"center",alignItems:"center",flexDir:"column",maxH:"300px",children:l&&l.length>0?l.map(((e,n)=>(0,q.jsxs)(i.az,{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",children:[(0,q.jsxs)(r.$,{justifyContent:"space-between",onClick:()=>x("/showclub/".concat(e._id)),children:[n+1,". Club Name: ",e.name]},e._id),(0,q.jsx)(r.$,{background:"#f05e56",onClick:()=>(async e=>{if(h&&e){u(!0);try{const n={headers:{Authorization:"Bearer ".concat(h.token)}},{data:t}=await I.A.get("/api/clubs/decline/request/".concat(e,"/").concat(h._id),n);a(t),u(!1)}catch(n){u(!1),console.error("Error fetching club requests/decline:",n)}}})(e._id),children:c?(0,q.jsx)(R.y,{size:"small"}):"Decline"})]},n))):(0,q.jsx)(q.Fragment,{children:(0,q.jsx)(s.E,{children:"All club requests have been replied to."})})}),(0,q.jsx)(E.j,{fontSize:"small",textDecor:"underline",children:"These requests were made by club coaches."})]})]})]})};const $=function(){const{user:e,notification:n,setNotification:t}=(0,w.a)(),{isOpen:S,onOpen:z,onClose:A}=(0,o.j)(),R=(0,k.Zp)(),E=(0,l.A)({base:"none",md:"flex"}),_=(0,l.A)({base:"hidden",md:"visible"});return(0,q.jsxs)(q.Fragment,{children:[(0,q.jsxs)(i.az,{display:"flex",justifyContent:"space-between",alignItems:"center",bg:"white",w:"100%",p:3,paddingBottom:2,boxShadow:"2xl",zIndex:10,top:0,position:"fixed",children:[(0,q.jsx)(s.E,{textAlign:"center",fontSize:{base:"small",md:"medium"},fontWeight:"bold",userSelect:"none",p:0,m:0,pl:3,children:"Worldsamma"}),(0,q.jsxs)(i.az,{display:"flex",justifyContent:"center",alignItems:"center",children:[(0,q.jsx)(r.$,{backgroundColor:"transparent",display:E,visibility:_,_hover:{backgroundColor:"transparent",color:"green.400"},onClick:()=>{R("/dashboard")},children:"My Programs"}),(0,q.jsx)(r.$,{variant:"ghost",onClick:z,_hover:{backgroundColor:"transparent",color:"green.400"},children:(0,q.jsx)(s.E,{display:{base:"none",md:"flex"},px:4,userSelect:"none",children:"Discover"})}),(0,q.jsx)(D,{})]}),(0,q.jsxs)("div",{children:[(0,q.jsxs)(h.W,{children:[(0,q.jsxs)(x.I,{p:1,position:"relative",children:[(0,q.jsx)(C.X,{fontSize:"2xl",p:0,m:0}),n.length>0&&(0,q.jsx)(a.E,{variant:"subtle",position:"absolute",top:"-3px",right:"-3px",backgroundColor:"red",zIndex:1,borderRadius:"50%",color:"white",children:n.length})]}),(0,q.jsxs)(p.c,{pl:2,children:[!n.length&&"No New Messages",n.map((e=>(0,q.jsx)(m.D,{onClick:()=>{t(n.filter((n=>n!==e)))},children:"New Message from ".concat(e.sender?e.sender.name:"Coach"," ADM: ").concat(e.sender?e.sender.admission:" ")},e._id)))]})]}),(0,q.jsx)(h.W,{children:(0,q.jsx)(x.I,{as:r.$,bg:"white",_hover:{backgroundColor:"transparent"},onClick:z,children:"flex"===E?(0,q.jsx)(y.e,{size:"sm",cursor:"pointer",name:null===e||void 0===e?void 0:e.name,src:null===e||void 0===e?void 0:e.pic}):(0,q.jsx)(c.K,{backgroundColor:"transparent",icon:(0,q.jsx)(d._,{src:"https://res.cloudinary.com/dvc7i8g1a/image/upload/v1706276791/icons8-menu-50_afv1fe.png",height:5})})})})]})]}),(0,q.jsxs)(b._,{placement:"left",onClose:A,isOpen:S,children:[(0,q.jsx)(g.m,{bg:"blackAlpha.300",backdropFilter:"blur(10px) hue-rotate(90deg)"}),(0,q.jsxs)(j.z,{children:[(0,q.jsxs)(f.r,{borderBottomWidth:"1px",display:"flex",justifyContent:"space-between",children:["Dashboard",(0,q.jsx)(u.J,{onClick:A})]}),(0,q.jsxs)(v.c,{display:"flex",flexDir:"column",justifyContent:"space-between",width:"100%",children:[(0,q.jsxs)(i.az,{padding:3,display:"flex",justifyContent:"space-around",flexDir:"column",children:[(0,q.jsxs)(r.$,{display:"flex",justifyContent:"left",alignItems:"center",background:"white",m:1,_hover:{backgroundColor:"transparent",color:"green"},onClick:()=>R("/profile"),children:[(0,q.jsx)(y.e,{size:"sm",cursor:"pointer",name:null===e||void 0===e?void 0:e.name,src:null===e||void 0===e?void 0:e.pic}),(0,q.jsx)(s.E,{p:2,m:1,children:"Profile"})]}),(0,q.jsx)(r.$,{justifyContent:"left",background:"white",_hover:{backgroundColor:"transparent",color:"green"},onClick:()=>{R("/dashboard"),A()},children:"My Programs"}),(0,q.jsx)(r.$,{justifyContent:"start",background:"white",_hover:{backgroundColor:"transparent",color:"green"},onClick:()=>{R("/clubs"),A()},children:"Clubs"}),(0,q.jsx)(r.$,{justifyContent:"left",background:"white",_hover:{backgroundColor:"transparent",color:"green"},isDisabled:!(null!==e&&void 0!==e&&e.provinces),onClick:()=>{R("/province"),A()},children:"Provincial level"}),(0,q.jsx)(r.$,{background:"white",justifyContent:"left",_hover:{backgroundColor:"transparent",color:"green"},onClick:()=>{R("/national"),A()},children:"National level"}),(0,q.jsx)(r.$,{background:"white",justifyContent:"left",_hover:{backgroundColor:"transparent",color:"green"},children:"International Championship"})]}),(0,q.jsx)(r.$,{onClick:()=>{localStorage.removeItem("userInfo"),t([]),R("/")},children:"Log out"})]})]})]})]})}},915:(e,n,t)=>{t.r(n),t.d(n,{default:()=>S});var r=t(5043),o=t(3216),i=t(3748),s=t(5522),l=t(3952),a=t(3461),c=t(4776),d=t(7451),u=t(3224),h=t(8028),x=t(1377),p=t(6818),m=t(9261),b=t(8024),g=t(6213),j=t(834),f=t(7118),v=t(7921),C=t(1191),y=t(3747),k=t(579);const w=e=>{let{onClose:n}=e;const{user:t,club:u,setClub:x,setRequests:b,setUser:w}=(0,p.a)(),[S,z]=(0,r.useState)(null),[A,R]=(0,r.useState)(null===t||void 0===t?void 0:t.country),[E,_]=(0,r.useState)(t.provinces),[I,q]=(0,r.useState)(""),[D,$]=(0,r.useState)(""),[M,B]=(0,r.useState)(""),[N,J]=(0,r.useState)([]),[O,W]=(0,r.useState)([]),F=(0,o.Zp)(),P=(0,i.d)(),Z=(0,y.bK)(null===t||void 0===t?void 0:t.token);(0,r.useEffect)((()=>{Z&&Z.on("sent request",(e=>{w((n=>({...n,clubRequests:[...n.clubRequests,e._id]}))),b((n=>({...n,club:e})))}))}),[Z,b,w]);const T=Object.entries(C.Xr).map((e=>{let[n,t]=e;return{value:t.name,label:t.name}})),X=(0,r.useCallback)((async()=>{if(t)try{const e={headers:{Authorization:"Bearer ".concat(null===t||void 0===t?void 0:t.token)}},{data:n}=await g.A.get("/api/user/".concat(t.country,"/").concat(E),e);W(n)}catch(e){console.error("Error fetching users with no clubs:",e)}else F("/dashboard")}),[t.token,t._id,W,E]);(0,r.useEffect)((()=>{t?X():F("/dashboard")}),[X,F,t]),(0,r.useEffect)((()=>{t||F("/dashboard");(async()=>{const e=(0,m.e)(A);J(e)})()}),[t]);const Y=(0,r.useCallback)((async(e,n)=>{if(n&&n.preventDefault(),S)if(t)try{const n={headers:{Authorization:"Bearer ".concat(t.token)}},{data:r}=await g.A.get("/api/user/".concat(t.country,"/").concat(t.provinces,"/").concat(S,"/").concat(e),n);x(r)}catch(r){console.error("Error fetching Club:",r)}else F("/dashboard");else P({title:"Give your Club a name please"})}),[t.token,t._id,x]);return(0,k.jsxs)(j.T,{backgroundColor:"whitesmoke",width:"100%",boxShadow:"dark-lg",p:"6",rounded:"md",bg:"white",children:[(0,k.jsxs)(s.az,{display:"flex",justifyContent:"center",alignItems:"center",fontSize:"large",width:"100%",mt:20,children:[(0,k.jsx)(h.$,{fontSize:"x-large",onClick:()=>{n()},width:"10px",children:"X"}),(0,k.jsx)(l.E,{fontWeight:"bold",m:1,children:"Club Form"}),(0,k.jsxs)(l.E,{fontSize:"sm",fontWeight:500,bg:(0,f.dU)("green.50","green.900"),p:2,px:3,color:"green.500",rounded:"full",children:["Status (*",u&&u.registration?"Registered":"Not registered",")"]})]}),(0,k.jsxs)(s.az,{m:3,p:3,borderRadius:3,width:{base:"97%",md:"60%"},border:"1px solid #c255ed",children:[(0,k.jsxs)(a.MJ,{id:"first-name",isRequired:!0,children:[(0,k.jsx)(c.l,{textColor:"#c255ed",children:"Club name"}),(0,k.jsx)(v.p,{placeholder:"Enter Club Name",value:S||u&&u.name||"",onChange:e=>z(e.target.value)})]}),(0,k.jsxs)(a.MJ,{id:"country",isRequired:!0,children:[(0,k.jsx)(c.l,{textColor:"#c255ed",children:"Country"}),(0,k.jsx)(d.l,{placeholder:"Select Club country",display:"flex",justifyContent:"center",alignItems:"center",width:"100%",value:null===t||void 0===t?void 0:t.country,isDisabled:!0,onChange:e=>R(e.target.value),children:T.map((e=>(0,k.jsx)("option",{value:e.value,style:{color:"black"},children:e.label},e.value)))})]}),A&&N?(0,k.jsxs)(a.MJ,{id:"provinces",isRequired:!0,children:[(0,k.jsx)(c.l,{textColor:"#c255ed",children:"County/Province"}),(0,k.jsx)(d.l,{placeholder:"Select Club province",display:"flex",justifyContent:"center",alignItems:"center",width:"100%",value:E,isDisabled:!0,onChange:e=>_(e.target.value),children:N&&N.map((e=>(0,k.jsx)("option",{value:e.value,style:{color:"black"},children:e.name},e.value)))})]}):(0,k.jsxs)(a.MJ,{id:"provinces",isRequired:!0,children:[(0,k.jsx)(c.l,{textColor:"#c255ed",children:"County/Province"}),(0,k.jsx)(v.p,{type:"text",placeholder:"Province",onChange:e=>_(e.target.value)})]}),(0,k.jsx)(a.MJ,{id:"first-name",isRequired:!0,children:(0,k.jsx)(c.l,{textColor:"#c255ed",children:"Make requests to members around you."})}),(0,k.jsxs)(s.az,{display:"flex",flexDir:"column",justifyContent:"center",alignItems:"center",borderRadius:3,width:"100%",height:"200px",overflow:"auto",children:[!O&&(0,k.jsx)(l.E,{textAlign:"center",children:"No student without a club in this region."}),O.length>0&&O.map((e=>(0,k.jsxs)(s.az,{display:"flex",justifyContent:"space-between",alignItems:"center",style:{color:"black"},width:"90%",m:1,children:[(0,k.jsxs)(l.E,{fontSize:"small",fontWeight:"bold",children:["Name: ",e.name,", Adm: ",e.admission]}),(0,k.jsx)(h.$,{borderRadius:20,isDisabled:u&&u.clubRequests.includes(e._id),onClick:n=>Y(e._id,n),backgroundColor:"#c255ed",children:u&&u.clubRequests.includes(e._id)?"Request sent":"Send Request"})]},e._id)))]}),(0,k.jsxs)(a.MJ,{id:"members",isRequired:!0,children:[(0,k.jsxs)(c.l,{textColor:"#c255ed",children:["Students enrolled ",u&&u.members.length,"/20"]}),(0,k.jsxs)(s.az,{display:"flex",justifyContent:"center",alignItems:"center",borderRadius:3,width:"100%",height:"100px",overflow:"auto",borderTop:"1px solid #c255ed",borderBottom:"1px solid #c255ed",children:[u&&0===u.members.length&&(0,k.jsx)(l.E,{textAlign:"center",children:"No members available for this club."}),u&&u.members.length>0&&u.members.map((e=>(0,k.jsxs)(h.$,{fontSize:"small",fontWeight:"bold",m:1,children:["Adm: ",e.admission]})))]})]}),(0,k.jsxs)(a.MJ,{id:"chairman",isRequired:!0,children:[(0,k.jsx)(c.l,{children:"Chairperson"}),(0,k.jsx)(v.p,{type:"text",name:"chairman",value:I,onChange:e=>q(e.target.chairperson),placeholder:"Input valid adm of the party",isInvalid:!(null!==u&&void 0!==u&&u.members.some((e=>e.admission===I)))})]}),(0,k.jsxs)(a.MJ,{id:"secretary",isRequired:!0,children:[(0,k.jsx)(c.l,{children:"Secretary"}),(0,k.jsx)(v.p,{type:"text",name:"secretary",value:M,placeholder:"Input valid adm of the party",isInvalid:!(null!==u&&void 0!==u&&u.members.some((e=>e.admission===M))),onChange:e=>B(e.target.secretary)})]}),(0,k.jsxs)(a.MJ,{id:"vice-chairman",isRequired:!0,children:[(0,k.jsx)(c.l,{children:"Vice Chairperson"}),(0,k.jsx)(v.p,{type:"text",name:"viceChairman",value:D,placeholder:"Input valid adm of the party",isInvalid:!(null!==u&&void 0!==u&&u.members.some((e=>e.admission===D))),onChange:e=>$(e.target.viceChair)})]}),(0,k.jsxs)(a.MJ,{id:"provincial-coach",children:[(0,k.jsx)(c.l,{children:"Coach"}),(0,k.jsx)(v.p,{type:"text",name:"provincialCoach",value:null===t||void 0===t?void 0:t.admission,isDisabled:!0})]}),(0,k.jsx)(h.$,{colorScheme:"blue",width:"100%",style:{marginTop:15},isDisabled:(null===u||void 0===u?void 0:u.members.length)<20||!I||!M||!D,onClick:()=>(async e=>{if(e.preventDefault(),I&&M&&D&&t)try{const e={headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(t.token)}},n={chairperson:I,secretary:M,viceChair:D},{data:r}=await g.A.post("/api/club/register",n,e);console.log(r),x(r)}catch(n){console.log(n)}})(),children:(0,k.jsx)(l.E,{children:" Register Club "})})," "]})]})};function S(){const{user:e,club:n}=(0,p.a)(),[t,j]=(0,r.useState)([]),[f,v]=(0,r.useState)([]),[C,y]=(0,r.useState)(null===e||void 0===e?void 0:e.provinces),[S,z]=(0,r.useState)(!1),A=(0,o.Zp)(),R=(0,m.x)(null===e||void 0===e?void 0:e.country),[E,_]=(0,r.useState)(!1),I=(0,i.d)(),q=(0,r.useCallback)((async()=>{if(e){_(!0),v([]);try{const n={headers:{Authorization:"Bearer ".concat(e.token)}},{data:t}=await g.A.get("/api/clubs/".concat(e.country,"/").concat(C),n);v(t),_(!1)}catch(n){console.error("Error fetching or creating clubs:",n),v([]),_(!1)}}else A("/dashboard")}),[e,v,C]);(0,r.useEffect)((()=>{e?q():A("/dashboard")}),[q,A,e]),(0,r.useEffect)((()=>{e||A("/dashboard");(async()=>{const n=(0,m.e)(null===e||void 0===e?void 0:e.country);j(n)})()}),[e]);return(0,k.jsxs)(s.az,{display:"flex",flexDir:"column",backgroundColor:"white",width:"100%",overflowX:"auto",justifyContent:"center",alignItems:"center",children:[(0,k.jsx)(s.az,{position:"fixed",background:"Background",zIndex:10,width:"100%",children:(0,k.jsx)(b.A,{})}),(0,k.jsxs)(l.E,{textAlign:"center",fontSize:"large",fontWeight:"bold",p:3,mt:20,children:["Country: ",null===e||void 0===e?void 0:e.country," ",R]}),(0,k.jsxs)(s.az,{display:"flex",flexDir:"column",justifyContent:"center",alignItems:"center",width:{base:"97%",md:"70%"},backgroundColor:"Background",boxShadow:"dark-lg",p:"6",rounded:"md",bg:"white",fontStyle:"italic",children:[(0,k.jsxs)(a.MJ,{id:"provinces",isRequired:!0,textAlign:"center",width:{base:"100%",md:"60%"},p:3,children:[(0,k.jsx)(c.l,{textAlign:"center",children:"Select State"}),(0,k.jsx)(d.l,{placeholder:"Select your province",display:"flex",justifyContent:"center",alignItems:"center",width:"100%",value:C,onChange:e=>{y(e.target.value),q(e.target.value)},children:t&&t.map((e=>(0,k.jsx)("option",{value:e.value,style:{color:"black"},children:e.name},e.value)))})]}),(0,k.jsxs)(l.E,{fontSize:"larger",fontWeight:"bold",textColor:"darkgreen",children:["Available Clubs in ",C]}),(0,k.jsxs)(s.az,{display:"flex",flexDir:"column",justifyContent:"center",alignItems:"center",height:"10rem",m:1,p:0,borderRadius:3,width:{base:"100%",md:"80%"},children:[" ",E?(0,k.jsx)(u.y,{}):(0,k.jsx)(s.az,{display:"flex",flexDir:"column",justifyContent:"center",alignItems:"center",maxH:"300px",width:"100%",children:f&&f.length>0?f.map(((e,n)=>(0,k.jsxs)(h.$,{width:"100%",onClick:()=>A("/showclub/".concat(e._id,"/",!1)),m:1,children:[n+1,". ",e.name]},e.code))):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(l.E,{textAlign:"center",children:(0,k.jsx)(x._,{src:"https://res.cloudinary.com/dvc7i8g1a/image/upload/v1708443842/icons8-here-80_oa8vme.png",width:7})}),(0,k.jsx)(l.E,{fontWeight:"bold",children:"No clubs available in this region yet \ud83d\udeab"}),(0,k.jsx)(l.E,{children:"Start your own club below and lead the way!"})]})})]}),null!==e&&void 0!==e&&e.couch?(0,k.jsx)(s.az,{m:2,children:"Your Club"}):(0,k.jsx)(h.$,{display:"flex",backgroundColor:"#c255ed",borderRadius:20,onClick:()=>{(()=>{const n=["Guest","Yellow","Orange","Red","Purple","Green","Blue","Brown","Black"];e&&n.indexOf(e.belt)>=n.indexOf("Orange")?z(!0):I({title:"You need to elevate your craft to at least Orange Belt!",description:"Requirements not attained yet",status:"info",duration:5e3,position:"bottom"})})()},m:2,children:(0,k.jsx)(l.E,{children:n&&n.registered?"Continue Registering":"Register Club"})})]}),S&&(0,k.jsx)(w,{onClose:()=>z(!1)})]})}}}]);
//# sourceMappingURL=915.d4e0dd0d.chunk.js.map